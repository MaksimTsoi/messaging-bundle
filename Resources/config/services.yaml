services:

    Tsoi\EventBusBundle\EventBus\Amqp\Publisher:
        class: Tsoi\EventBusBundle\EventBus\Amqp\Publisher

    Tsoi\EventBusBundle\EventBus\Amqp\Consumer:
        class: Tsoi\EventBusBundle\EventBus\Amqp\Consumer

    tsoi.event_bus:
        class: Tsoi\EventBusBundle\EventBus\EventBus
        public: true
        arguments:
            - '@Tsoi\EventBusBundle\EventBus\Amqp\Publisher'
            - '@Tsoi\EventBusBundle\EventBus\Amqp\Consumer'
            - '@service_container'

    tsoi.command.run:
        class: Tsoi\EventBusBundle\Command\RunCommand
        arguments:
            - '@service_container'
        tags:
            - { name: console.command }

    tsoi.command.subscribe:
        class: Tsoi\EventBusBundle\Command\SubscribeCommand
        arguments:
            - '@tsoi.event_bus'
            - '@service_container'
        tags:
            - { name: console.command }